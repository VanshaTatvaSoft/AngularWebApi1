<!-- TEXT, PASSWORD, EMAIL -->
@if (config.type !== 'select' && config.type !== 'textarea' && config.type !== 'radio' && config.type !== 'checkbox') {
  <mat-form-field [appearance]="config.appearance" class="w-full" [ngClass]="config.class">
    <mat-label>
      {{ config.label }}
      @if (showRequiredStar) {
        <span class="required-star">*</span>
      }
    </mat-label>

    <input matInput [type]="isPassword ? (showPassword ? 'text' : 'password') : config.type"
           [formControl]="formControl || internalControl"
           [placeholder]="config.placeholder"
           [id]="config.id"
           [disabled]="config.disabled ?? false"
           (blur)="(formControl || internalControl)?.markAsTouched()" />

    @if (isPassword) {
      <mat-icon matSuffix class="cursor-pointer" (click)="togglePassword()">
        {{ showPassword ? 'visibility' : 'visibility_off' }}
      </mat-icon>
    }

    @if (!isPassword && config.icon) {
      <mat-icon matSuffix>{{ config.icon }}</mat-icon>
    }

    @if (config.hint) {
      <mat-hint>{{ config.hint }}</mat-hint>
    }

    @if (errorMessage) {
      <mat-error>{{ errorMessage }}</mat-error>
    }
  </mat-form-field>
}

<!-- TEXTAREA -->
@if (config.type === 'textarea') {
  <mat-form-field [appearance]="config.appearance" class="w-100" [ngClass]="config.class">
    <mat-label>
      {{ config.label }}
      @if (showRequiredStar) {
        <span class="required-star">*</span>
      }
    </mat-label>

    <textarea matInput
              [formControl]="formControl || internalControl"
              [placeholder]="config.placeholder"
              [id]="config.id"
              [rows]="config?.rows || 3"
              [disabled]="config.disabled ?? false"
              (blur)="(formControl || internalControl)?.markAsTouched()"></textarea>

    @if (config.hint) {
      <mat-hint>{{ config.hint }}</mat-hint>
    }

    @if (errorMessage) {
      <mat-error>{{ errorMessage }}</mat-error>
    }
  </mat-form-field>
}

<!-- SELECT -->
@if (config.type === 'select') {
  <mat-form-field [appearance]="config.appearance" class="w-full" [ngClass]="config.class">
    <mat-label>
      {{ config.label }}
      @if (showRequiredStar) {
        <span class="required-star">*</span>
      }
    </mat-label>

    <mat-select [formControl]="formControl || internalControl"
                [placeholder]="config.placeholder"
                [disabled]="config.disabled ?? false">
      @for (opt of config.options; track opt.value) {
        <mat-option [value]="opt.value">{{ opt.label }}</mat-option>
      }
    </mat-select>

    @if (config.hint) {
      <mat-hint>{{ config.hint }}</mat-hint>
    }

    @if (errorMessage) {
      <mat-error>{{ errorMessage }}</mat-error>
    }
  </mat-form-field>
}

<!-- RADIO -->
@if (config.type === 'radio') {
  <div class="radio-group" [ngClass]="config.class">
    <label>{{ config.label }}</label>
    <mat-radio-group [formControl]="formControl || internalControl">
      @for (opt of config.options; track opt.value) {
        <mat-radio-button [value]="opt.value">{{ opt.label }}</mat-radio-button>
      }
    </mat-radio-group>
    @if (errorMessage) {
      <mat-error>{{ errorMessage }}</mat-error>
    }
  </div>
}

<!-- CHECKBOX -->
@if (config.type === 'checkbox') {
  <div class="checkbox-group" [ngClass]="config.class">
    <mat-checkbox [formControl]="formControl || internalControl"
                  [disabled]="config.disabled ?? false">
      {{ config.label }}
    </mat-checkbox>
    @if (errorMessage) {
      <mat-error>{{ errorMessage }}</mat-error>
    }
  </div>
}
